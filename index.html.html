<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœ€å¼·ã‚¸ãƒ£ã‚°ãƒ©ãƒ¼ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #1a1a1a;
            color: #eee;
            text-align: center;
            padding: 10px;
            margin: 0;
        }
        h2 { color: #f1c40f; margin-bottom: 5px; }
        
        /* æ©Ÿç¨®ã‚»ãƒ¬ã‚¯ãƒˆãƒœãƒƒã‚¯ã‚¹ */
        select {
            font-size: 18px;
            padding: 10px;
            width: 100%;
            margin-bottom: 15px;
            border-radius: 8px;
            background: #333;
            color: white;
            border: 1px solid #555;
        }

        /* ã‚¹ãƒšãƒƒã‚¯è¡¨ */
        .spec-table {
            width: 100%;
            font-size: 12px;
            margin-bottom: 20px;
            border-collapse: collapse;
            background-color: #2c3e50;
        }
        .spec-table th, .spec-table td {
            border: 1px solid #444;
            padding: 6px;
            text-align: center;
        }
        .spec-table th { background-color: #34495e; color: #ecf0f1; }
        .high-setting { background-color: #c0392b; color: white; font-weight: bold; } /* è¨­å®š6ã‚’ç›®ç«‹ãŸã›ã‚‹ */

        /* å…¥åŠ›ã‚¨ãƒªã‚¢ */
        .input-area {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            background: #333;
            padding: 10px;
            border-radius: 10px;
        }
        .input-group { width: 48%; }
        .input-group label { display: block; font-size: 12px; margin-bottom: 5px; color: #aaa; }
        input[type="number"] {
            width: 90%;
            padding: 8px;
            font-size: 18px;
            text-align: center;
            border-radius: 5px;
            border: none;
        }

        /* ãƒœã‚¿ãƒ³ã‚¨ãƒªã‚¢ */
        .btn-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }
        button {
            padding: 15px 5px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            color: white;
            font-weight: bold;
            font-size: 16px;
            position: relative;
        }
        button:active { transform: scale(0.98); }
        
        .btn-grape { background-color: #8e44ad; grid-column: 1 / 3; font-size: 20px; } /* ã¶ã©ã†ã¯å¤§ãã */
        .btn-cherry { background-color: #c0392b; }
        .btn-dup { background-color: #d35400; font-size: 14px; }
        .btn-bonus { background-color: #2980b9; font-size: 14px; }
        
        .count-display {
            display: block;
            font-size: 24px;
            margin-top: 5px;
        }
        .prob-display {
            display: block;
            font-size: 12px;
            opacity: 0.8;
        }

        /* çµæœè¡¨ç¤º */
        .result-box {
            background: #333;
            padding: 15px;
            border-radius: 10px;
            text-align: left;
            font-size: 14px;
            line-height: 1.6;
        }
        .result-row { display: flex; justify-content: space-between; border-bottom: 1px solid #444; padding: 5px 0; }
        .highlight { color: #f1c40f; font-weight: bold; }
    </style>
</head>
<body>

    <h2>ğŸ¤¡ ã‚¸ãƒ£ã‚°ãƒ©ãƒ¼è¨­å®šåˆ¤åˆ¥</h2>
    
    <select id="machineSelect" onchange="changeMachine()">
        <option value="my5">Sãƒã‚¤ã‚¸ãƒ£ã‚°ãƒ©ãƒ¼V</option>
        <option value="funky2">Sãƒ•ã‚¡ãƒ³ã‚­ãƒ¼ã‚¸ãƒ£ã‚°ãƒ©ãƒ¼2</option>
        <option value="im6">Sã‚¢ã‚¤ãƒ ã‚¸ãƒ£ã‚°ãƒ©ãƒ¼EX(6å·æ©Ÿ)</option>
        <option value="happy3">Sãƒãƒƒãƒ”ãƒ¼ã‚¸ãƒ£ã‚°ãƒ©ãƒ¼V III</option>
        <option value="gogo3">Sã‚´ãƒ¼ã‚´ãƒ¼ã‚¸ãƒ£ã‚°ãƒ©ãƒ¼3</option>
    </select>

    <div id="specTableContainer"></div>

    <div class="input-area">
        <div class="input-group">
            <label>æ‰“ã¡å§‹ã‚å›è»¢æ•°</label>
            <input type="number" id="startSpins" value="0" oninput="calc()">
        </div>
        <div class="input-group">
            <label>ç¾åœ¨ã®å›è»¢æ•°</label>
            <input type="number" id="currentSpins" placeholder="ãƒ‡ãƒ¼ã‚¿æ©Ÿã®æ•°å­—" oninput="calc()">
        </div>
    </div>

    <div class="btn-container">
        <button class="btn-grape" onclick="count('grape')">
            ğŸ‡ ã¶ã©ã†
            <span class="count-display" id="cnt-grape">0</span>
            <span class="prob-display" id="prob-grape">1 / -.--</span>
        </button>

        <button class="btn-cherry" onclick="count('cherry')">
            ğŸ’ ãƒã‚§ãƒªãƒ¼(å…¨)
            <span class="count-display" id="cnt-cherry">0</span>
            <span class="prob-display" id="prob-cherry">1 / -.--</span>
        </button>

        <button class="btn-dup" onclick="count('dup')">
            ğŸ”¥ é‡è¤‡ãƒã‚§ãƒªãƒ¼<br>
            <span class="count-display" id="cnt-dup">0</span>
        </button>
        
        <div style="grid-column: 1 / 3; display:flex; gap:10px; margin-top:10px;">
             <div style="flex:1">
                 <label style="font-size:12px; color:#aaa;">BBå›æ•°</label>
                 <input type="number" id="bb-count" value="0" style="width:100%;" oninput="calc()">
             </div>
             <div style="flex:1">
                 <label style="font-size:12px; color:#aaa;">RBå›æ•°</label>
                 <input type="number" id="rb-count" value="0" style="width:100%;" oninput="calc()">
             </div>
        </div>
    </div>

    <div class="result-box">
        <div class="result-row"><span>å€‹äººå›è»¢æ•°</span> <span id="my-spins" class="highlight">0 G</span></div>
        <div class="result-row"><span>ã¶ã©ã†ç¢ºç‡</span> <span id="res-grape">1 / -.--</span></div>
        <div class="result-row"><span>ãƒã‚§ãƒªãƒ¼ç¢ºç‡</span> <span id="res-cherry">1 / -.--</span></div>
        <div class="result-row"><span>åˆç®—ç¢ºç‡</span> <span id="res-total">1 / -.--</span></div>
        <div style="margin-top:10px; font-size:12px; color:#aaa;">â€»ãƒã‚§ãƒªãƒ¼é‡è¤‡ã¯ã‚«ã‚¦ãƒ³ãƒˆã®ã¿ã§ã€ç¢ºç‡ã¯å…¨ãƒã‚§ãƒªãƒ¼ã§è¨ˆç®—ã—ã¦ã„ã¾ã™ã€‚é‡è¤‡ç¢ºç‡ã¯æ©Ÿç¨®ã”ã¨ã«è§£æã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</div>
    </div>

    <script>
        // æ©Ÿç¨®ãƒ‡ãƒ¼ã‚¿ï¼ˆå®Ÿæˆ¦å€¤å«ã‚€ç›®å®‰ï¼‰
        const machines = {
            "my5": {
                name: "ãƒã‚¤ã‚¸ãƒ£ã‚°ãƒ©ãƒ¼V",
                table: `<tr><th>è¨­å®š</th><th>BB</th><th>RB</th><th>åˆç®—</th><th>ã¶ã©ã†</th><th>ãƒã‚§ãƒªãƒ¼</th></tr>
                        <tr><td>1</td><td>1/273</td><td>1/409</td><td>1/163</td><td>1/5.90</td><td>1/36.0</td></tr>
                        <tr><td>2</td><td>1/270</td><td>1/385</td><td>1/159</td><td>1/5.85</td><td>1/35.9</td></tr>
                        <tr><td>3</td><td>1/266</td><td>1/336</td><td>1/148</td><td>1/5.80</td><td>1/35.8</td></tr>
                        <tr><td>4</td><td>1/254</td><td>1/290</td><td>1/135</td><td>1/5.75</td><td>1/35.7</td></tr>
                        <tr><td>5</td><td>1/240</td><td>1/240</td><td>1/120</td><td>1/5.70</td><td>1/35.6</td></tr>
                        <tr class="high-setting"><td>6</td><td>1/229</td><td>1/229</td><td>1/114</td><td>1/5.66</td><td>1/35.5</td></tr>`
            },
            "funky2": {
                name: "ãƒ•ã‚¡ãƒ³ã‚­ãƒ¼ã‚¸ãƒ£ã‚°ãƒ©ãƒ¼2",
                table: `<tr><th>è¨­å®š</th><th>BB</th><th>RB</th><th>åˆç®—</th><th>ã¶ã©ã†</th><th>ãƒã‚§ãƒªãƒ¼</th></tr>
                        <tr><td>1</td><td>1/266</td><td>1/439</td><td>1/165</td><td>1/5.80</td><td>1/37.0</td></tr>
                        <tr><td>2</td><td>1/259</td><td>1/407</td><td>1/158</td><td>1/5.75</td><td>1/36.8</td></tr>
                        <tr><td>3</td><td>1/256</td><td>1/366</td><td>1/150</td><td>1/5.70</td><td>1/36.6</td></tr>
                        <tr><td>4</td><td>1/249</td><td>1/322</td><td>1/140</td><td>1/5.65</td><td>1/36.4</td></tr>
                        <tr><td>5</td><td>1/240</td><td>1/299</td><td>1/133</td><td>1/5.60</td><td>1/36.2</td></tr>
                        <tr class="high-setting"><td>6</td><td>1/219</td><td>1/262</td><td>1/119</td><td>1/5.60</td><td>1/36.0</td></tr>`
            },
            "im6": {
                name: "ã‚¢ã‚¤ãƒ ã‚¸ãƒ£ã‚°ãƒ©ãƒ¼EX(6å·æ©Ÿ)",
                table: `<tr><th>è¨­å®š</th><th>BB</th><th>RB</th><th>åˆç®—</th><th>ã¶ã©ã†</th><th>ãƒã‚§ãƒªãƒ¼</th></tr>
                        <tr><td>1</td><td>1/273</td><td>1/439</td><td>1/168</td><td>1/6.02</td><td>1/37.0</td></tr>
                        <tr><td>2</td><td>1/269</td><td>1/399</td><td>1/161</td><td>1/5.98</td><td>1/37.0</td></tr>
                        <tr><td>3</td><td>1/269</td><td>1/331</td><td>1/148</td><td>1/5.95</td><td>1/37.0</td></tr>
                        <tr><td>4</td><td>1/259</td><td>1/315</td><td>1/142</td><td>1/5.90</td><td>1/37.0</td></tr>
                        <tr><td>5</td><td>1/259</td><td>1/255</td><td>1/128</td><td>1/5.85</td><td>1/36.5</td></tr>
                        <tr class="high-setting"><td>6</td><td>1/255</td><td>1/255</td><td>1/127</td><td>1/5.78</td><td>1/36.0</td></tr>`
            },
            "happy3": {
                name: "ãƒãƒƒãƒ”ãƒ¼ã‚¸ãƒ£ã‚°ãƒ©ãƒ¼V III",
                table: `<tr><th>è¨­å®š</th><th>BB</th><th>RB</th><th>åˆç®—</th><th>ã¶ã©ã†</th><th>ãƒã‚§ãƒªãƒ¼</th></tr>
                        <tr><td>1</td><td>1/273</td><td>1/397</td><td>1/162</td><td>1/6.05</td><td>1/37.0</td></tr>
                        <tr><td>2</td><td>1/270</td><td>1/362</td><td>1/154</td><td>1/6.00</td><td>1/37.0</td></tr>
                        <tr><td>3</td><td>1/263</td><td>1/332</td><td>1/146</td><td>1/5.95</td><td>1/37.0</td></tr>
                        <tr><td>4</td><td>1/254</td><td>1/297</td><td>1/137</td><td>1/5.85</td><td>1/36.0</td></tr>
                        <tr><td>5</td><td>1/239</td><td>1/270</td><td>1/127</td><td>1/5.80</td><td>1/36.0</td></tr>
                        <tr class="high-setting"><td>6</td><td>1/226</td><td>1/256</td><td>1/120</td><td>1/5.70</td><td>1/36.0</td></tr>`
            },
            "gogo3": {
                name: "ã‚´ãƒ¼ã‚´ãƒ¼ã‚¸ãƒ£ã‚°ãƒ©ãƒ¼3",
                table: `<tr><th>è¨­å®š</th><th>BB</th><th>RB</th><th>åˆç®—</th><th>ã¶ã©ã†</th><th>ãƒã‚§ãƒªãƒ¼</th></tr>
                        <tr><td>1</td><td>1/259</td><td>1/354</td><td>1/149</td><td>1/6.25</td><td>1/35.0</td></tr>
                        <tr><td>2</td><td>1/258</td><td>1/332</td><td>1/145</td><td>1/6.20</td><td>1/35.0</td></tr>
                        <tr><td>3</td><td>1/258</td><td>1/306</td><td>1/140</td><td>1/6.15</td><td>1/35.0</td></tr>
                        <tr><td>4</td><td>1/254</td><td>1/268</td><td>1/130</td><td>1/6.10</td><td>1/35.0</td></tr>
                        <tr><td>5</td><td>1/247</td><td>1/255</td><td>1/125</td><td>1/6.05</td><td>1/35.0</td></tr>
                        <tr class="high-setting"><td>6</td><td>1/234</td><td>1/234</td><td>1/117</td><td>1/5.90</td><td>1/35.0</td></tr>`
            }
        };

        // å¤‰æ•°åˆæœŸåŒ–
        let counts = { grape: 0, cherry: 0, dup: 0 };

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚
        window.onload = function() {
            changeMachine(); // åˆæœŸè¡¨ç¤º
        };

        // æ©Ÿç¨®å¤‰æ›´å‡¦ç†
        function changeMachine() {
            let key = document.getElementById("machineSelect").value;
            let data = machines[key];
            
            // ãƒ†ãƒ¼ãƒ–ãƒ«æ›´æ–°
            let tableHTML = `<table class="spec-table"><caption>${data.name} ã‚¹ãƒšãƒƒã‚¯è¡¨</caption>` + data.table + `</table>`;
            document.getElementById("specTableContainer").innerHTML = tableHTML;
        }

        // ã‚«ã‚¦ãƒ³ãƒˆå‡¦ç†
        function count(type) {
            counts[type]++;
            document.getElementById(`cnt-${type}`).innerText = counts[type];
            
            // ã‚‚ã—ã€Œé‡è¤‡ãƒã‚§ãƒªãƒ¼ã€ãŒæŠ¼ã•ã‚ŒãŸã‚‰ã€æ™®é€šã®ãƒã‚§ãƒªãƒ¼ã‚‚1è¶³ã™ï¼ˆé‡è¤‡ï¼ãƒã‚§ãƒªãƒ¼æˆç«‹ã—ã¦ã‚‹ã‹ã‚‰ï¼‰
            if (type === 'dup') {
                counts['cherry']++;
                document.getElementById('cnt-cherry').innerText = counts['cherry'];
            }

            calc();
        }

        // è¨ˆç®—å‡¦ç†
        function calc() {
            let start = parseInt(document.getElementById('startSpins').value) || 0;
            let current = parseInt(document.getElementById('currentSpins').value) || 0;
            let mySpins = current - start;

            // å›è»¢æ•°ãŒãƒã‚¤ãƒŠã‚¹ãªã‚‰0ã«ã™ã‚‹
            if (mySpins < 0) mySpins = 0;

            document.getElementById('my-spins').innerText = mySpins + " G";

            // ã¶ã©ã†ç¢ºç‡
            if (counts.grape > 0 && mySpins > 0) {
                let p = (mySpins / counts.grape).toFixed(2);
                document.getElementById('prob-grape').innerText = "1 / " + p;
                document.getElementById('res-grape').innerText = "1 / " + p;
            }

            // ãƒã‚§ãƒªãƒ¼ç¢ºç‡
            if (counts.cherry > 0 && mySpins > 0) {
                let p = (mySpins / counts.cherry).toFixed(2);
                document.getElementById('prob-cherry').innerText = "1 / " + p;
                document.getElementById('res-cherry').innerText = "1 / " + p;
            }

            // ãƒœãƒ¼ãƒŠã‚¹åˆç®—
            let bb = parseInt(document.getElementById('bb-count').value) || 0;
            let rb = parseInt(document.getElementById('rb-count').value) || 0;
            let totalBonus = bb + rb;
            
            if (totalBonus > 0 && current > 0) { // åˆç®—ã¯ç·å›è»¢æ•°ã§è¦‹ã‚‹
                let p = (current / totalBonus).toFixed(0);
                document.getElementById('res-total').innerText = "1 / " + p;
            }
        }
    </script>
</body>
</html>